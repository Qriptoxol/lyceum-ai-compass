# ๐ Telegram Mini App "ะะธัะตะน โ1"

ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝะฐั ะฟะปะฐััะพัะผะฐ ะดะปั ะพะฑัะฐะทะพะฒะฐัะตะปัะฝะพะณะพ ัััะตะถะดะตะฝะธั ั ัะธััะตะผะพะน ัะพะปะตะน, ัะฐัะฟะธัะฐะฝะธะตะผ, ัะฟะตัะบัััะฐะผะธ ะธ ะฟัะพัะธะปัะฝัะผ ัะตััะธัะพะฒะฐะฝะธะตะผ.

## ๐ ะัััััะน ะกัะฐัั

### 1. ะกะพะทะดะฐะนัะต Telegram ะะพัะฐ
```bash
# ะัะบัะพะนัะต @BotFather ะฒ Telegram
# ะกะพะทะดะฐะนัะต ะฝะพะฒะพะณะพ ะฑะพัะฐ: /newbot
# ะกะพััะฐะฝะธัะต ัะพะบะตะฝ ะฑะพัะฐ
```

### 2. ะะฐะทะฒะตัะฝะธัะต ะัะพะตะบั
**ะะฐัะธะฐะฝั A: Lovable Cloud (ะะตะบะพะผะตะฝะดัะตััั)**
1. ะะฐะถะผะธัะต **"Publish"** ะฒ Lovable
2. ะะพะฑะฐะฒััะต ัะตะบัะตั `TELEGRAM_BOT_TOKEN` ะฒ Cloud โ Secrets
3. ะะพะฑะฐะฒััะต ัะตะบัะตั `ADMIN_SECRET_KEY` (ัะณะตะฝะตัะธััะนัะต: `openssl rand -hex 32`)

**ะะฐัะธะฐะฝั B: Self-Hosted**
```bash
# ะฃััะฐะฝะพะฒะธัะต Supabase CLI
npm install -g supabase

# ะะฐะฟัััะธัะต ะปะพะบะฐะปัะฝะพ
supabase start
supabase db reset
supabase functions serve

# ะะปะธ ัะฐะทะฒะตัะฝะธัะต ะฝะฐ ะฟัะพะดะฐะบัะฝ
supabase link --project-ref <your-project>
supabase db push
supabase functions deploy
```

### 3. ะกะพะทะดะฐะนัะต ะะตัะฒะพะณะพ ะะดะผะธะฝะธัััะฐัะพัะฐ

**ะะปั ะฒะตะฑ-ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ:**
```bash
node cli-create-first-admin.js admin SecurePassword123! "ะะปะฐะฒะฝัะน ะฐะดะผะธะฝะธัััะฐัะพั"
```
ะกะบัะธะฟั ะทะฐะฟัะพัะธั `ADMIN_SECRET_KEY`. ะะพัะปะต ัะพะทะดะฐะฝะธั ะฒะพะนะดะธัะต ะฒ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั: `/admin/login`

**ะะปั ะฟะพะปัะทะพะฒะฐัะตะปั Telegram:**
```bash
node cli-set-admin.js 123456789
```
ะฃะทะฝะฐัั Telegram ID: [@userinfobot](https://t.me/userinfobot)

### 4. ะะฐัััะพะนัะต Webhook
```bash
curl -X POST https://api.telegram.org/bot<YOUR_TOKEN>/setWebhook \
  -H "Content-Type: application/json" \
  -d '{"url": "https://yffdyyjugrzyqdvtjnho.supabase.co/functions/v1/telegram-webhook"}'
```

### 5. ะะฐัััะพะนัะต Telegram Mini App
ะกะผ. ะฟะพะปะฝัั ะดะพะบัะผะตะฝัะฐัะธั: **[DEPLOYMENT.md](./DEPLOYMENT.md)**

## ๐ ะะพะปะฝะฐั ะะพะบัะผะตะฝัะฐัะธั

ะะพะดัะพะฑะฝะฐั ะธะฝััััะบัะธั ะฟะพ ัะฐะทะฒะตัััะฒะฐะฝะธั: **[DEPLOYMENT.md](./DEPLOYMENT.md)**

ะะบะปััะฐะตั:
- โ ะะพัะฐะณะพะฒะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ Lovable Cloud ะธ Self-Hosted Supabase
- โ ะะฐัััะพะนะบะฐ Telegram Bot ะธ Mini App
- โ CLI ะบะพะผะฐะฝะดั ะดะปั ะฐะดะผะธะฝะธัััะธัะพะฒะฐะฝะธั
- โ ะะตะทะพะฟะฐัะฝะพััั ะธ ะฒะตัะธัะธะบะฐัะธั initData
- โ Troubleshooting ัะฐัะฟัะพัััะฐะฝะตะฝะฝัั ะฟัะพะฑะปะตะผ

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ
โ  Telegram Bot   โโโโโโโโโโถโ  Edge Function   โ
โ   (Webhook)     โ         โ telegram-webhook โ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ
โ Telegram Mini   โโโโโโโโโโถโ  Edge Function   โ
โ      App        โ         โ verify-init-data โ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ
โ   CLI Admin     โโโโโโโโโโถโ  Edge Function   โ
โ   Commands      โ         โ    set-admin     โ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
                            โโโโโโโโโโโโโโโโโโโโ
                            โ   PostgreSQL     โ
                            โ  + RLS Policies  โ
                            โโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะกะธััะตะผะฐ ะะพะปะตะน

| ะะพะปั | ะัะฐะฒะฐ ะดะพัััะฟะฐ |
|------|--------------|
| **Admin** | ะะพะปะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต ัะธััะตะผะพะน, ัะพะทะดะฐะฝะธะต ัะตััะพะฒ, ัะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ |
| **Teacher** | ะฃะฟัะฐะฒะปะตะฝะธะต ัะฟะตัะบัััะฐะผะธ, ะฟัะพัะผะพัั ัะฐัะฟะธัะฐะฝะธั, ะพัะฟัะฐะฒะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน |
| **Student** | ะะฐะฟะธัั ะฝะฐ ัะฟะตัะบัััั, ะฟัะพัะพะถะดะตะฝะธะต ัะตััะพะฒ, ะฟัะพัะผะพัั ัะฐัะฟะธัะฐะฝะธั |
| **Parent** | ะะพะฝะธัะพัะธะฝะณ ัะตะฑะตะฝะบะฐ, ะฟัะพัะผะพัั ัะตะทัะปััะฐัะพะฒ ัะตััะพะฒ |

## ๐ก๏ธ ะะตะทะพะฟะฐัะฝะพััั

- โ **ะัะธะฟัะพะณัะฐัะธัะตัะบะฐั ะฒะตัะธัะธะบะฐัะธั** Telegram initData
- โ **Row-Level Security (RLS)** ะฝะฐ ะฒัะตั ัะฐะฑะปะธัะฐั
- โ **HTTPS ัะพะปัะบะพ** ะดะปั ะฒัะตั API ะทะฐะฟัะพัะพะฒ
- โ **ะกะตะบัะตัั** ััะฐะฝัััั ะฒ Supabase Secrets (ะฝะต ะฒ ะบะพะดะต)
- โ **Security Definer Functions** ะดะปั ะฟัะพะฒะตัะบะธ ัะพะปะตะน

## ๐ฆ ะัะฝะพะฒะฝัะต ะคัะฝะบัะธะธ

### ะะปั ะฃัะธัะตะปะตะน
- ๐ ะะตััะพะฝะฐะปัะฝะพะต ัะฐัะฟะธัะฐะฝะธะต
- ๐ ะกะพะทะดะฐะฝะธะต ะธ ัะฟัะฐะฒะปะตะฝะธะต ัะฟะตัะบัััะฐะผะธ
- ๐จ ะัะฟัะฐะฒะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน ะบะปะฐััั
- ๐ค LLM-ะฟะพะผะพัะฝะธะบ ะดะปั ะณะตะฝะตัะฐัะธะธ ะผะฐัะตัะธะฐะปะพะฒ

### ะะปั ะฃัะตะฝะธะบะพะฒ
- ๐ ะัะพัะผะพัั ัะฐัะฟะธัะฐะฝะธั
- ๐ ะะฐะฟะธัั ะฝะฐ ัะฟะตัะบัััั
- ๐ฏ ะัะพัะพะถะดะตะฝะธะต ะฟัะพัะธะปัะฝัั ัะตััะพะฒ
- ๐ฌ LLM-ะฟะพะผะพัะฝะธะบ ะดะปั ััะตะฑั

### ะะปั ะะพะดะธัะตะปะตะน
- ๐ ะะพะฝะธัะพัะธะฝะณ ัะฐัะฟะธัะฐะฝะธั ัะตะฑะตะฝะบะฐ
- ๐ ะะตะทัะปััะฐัั ะฟัะพัะธะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั
- ๐ ะกะฒัะทั ั ะบะปะฐััะฝัะผ ััะบะพะฒะพะดะธัะตะปะตะผ
- โ LLM-FAQ ะพ ัะบะพะปะต

### ะะปั ะะดะผะธะฝะธัััะฐัะพัะพะฒ
- ๐ฅ ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ ะธ ัะพะปัะผะธ
- ๐ซ CRUD ะบะปะฐััะพะฒ ะธ ัะฐัะฟะธัะฐะฝะธั
- ๐ ะกะพะทะดะฐะฝะธะต ะฟัะพัะธะปัะฝัั ัะตััะพะฒ
- ๐ ะัะพัะผะพัั ััะฐัะธััะธะบะธ
- ๐ค ะะผะฟะพัั/ะญะบัะฟะพัั ะดะฐะฝะฝัั (CSV)

## ๐ง CLI ะะพะผะฐะฝะดั

### ะะฐะทะฝะฐัะตะฝะธะต ะะดะผะธะฝะธัััะฐัะพัะฐ
```bash
# ะงะตัะตะท curl
curl -X POST <YOUR_SUPABASE_URL>/functions/v1/set-admin \
  -H "Content-Type: application/json" \
  -d '{"telegram_id": 123456789, "secret_key": "your-secret"}'

# ะงะตัะตะท Node.js
node cli-set-admin.js 123456789
```

### ะัะพะฒะตัะบะฐ Webhook
```bash
# ะกัะฐััั webhook
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo

# ะะพะณะธ Edge Function
# ะ Lovable: Cloud โ Functions โ Logs
```

## ๐ Troubleshooting

**Webhook ะฝะต ัะฐะฑะพัะฐะตั?**
```bash
curl https://api.telegram.org/bot<TOKEN>/deleteWebhook
curl -X POST https://api.telegram.org/bot<TOKEN>/setWebhook \
  -d url=https://yffdyyjugrzyqdvtjnho.supabase.co/functions/v1/telegram-webhook
```

**initData ะฒะตัะธัะธะบะฐัะธั ะฝะต ะฟัะพัะพะดะธั?**
- ะฃะฑะตะดะธัะตัั, ััะพ `TELEGRAM_BOT_TOKEN` ัััะฐะฝะพะฒะปะตะฝ
- ะัะบัะพะนัะต Mini App **ัะตัะตะท Telegram** (ะฝะต ัะตัะตะท ะฑัะฐัะทะตั)

**ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะผะพะถะตั ะฒะพะนัะธ?**
```sql
-- ะัะพะฒะตัััะต ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั
SELECT * FROM profiles WHERE telegram_id = <TELEGRAM_ID>;
```

ะะพะปะฝัะน ัะฟะธัะพะบ ะฟัะพะฑะปะตะผ ะธ ัะตัะตะฝะธะน: **[DEPLOYMENT.md#troubleshooting](./DEPLOYMENT.md#troubleshooting)**

## ๐ ะขะตัะฝะพะปะพะณะธะธ

- **Frontend**: React, TypeScript, Tailwind CSS, Vite
- **Backend**: Supabase Edge Functions (Deno)
- **Database**: PostgreSQL ั Row-Level Security
- **Auth**: Telegram WebApp initData ะบัะธะฟัะพะณัะฐัะธั
- **Deployment**: Lovable Cloud (Supabase)

## ๐ ะะพะดะดะตัะถะบะฐ

- [Telegram Bot API Docs](https://core.telegram.org/bots/api)
- [Telegram Mini Apps Docs](https://core.telegram.org/bots/webapps)
- [Supabase Documentation](https://supabase.com/docs)
- [Lovable Cloud Docs](https://docs.lovable.dev/features/cloud)

---

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ
```sh
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
git clone <YOUR_GIT_URL>
cd <YOUR_PROJECT_NAME>

# ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
npm i

# ะะฐะฟัััะธัะต dev-ัะตัะฒะตั
npm run dev
```

### ะะฐะทะฒะตัััะฒะฐะฝะธะต
Simply open [Lovable](https://lovable.dev/projects/fd338275-eef8-485e-9c72-1420f63d4444) and click on Share -> Publish.

### ะะฐััะพะผะฝัะน ะดะพะผะตะฝ
To connect a domain, navigate to Project > Settings > Domains and click Connect Domain.
Read more here: [Setting up a custom domain](https://docs.lovable.dev/features/custom-domain#custom-domain)

## ๐ ะะธัะตะฝะทะธั

MIT License

---

**ะกะดะตะปะฐะฝะพ ั โค๏ธ ะดะปั ะพะฑัะฐะทะพะฒะฐัะตะปัะฝัั ัััะตะถะดะตะฝะธะน**
